{"ast":null,"code":"import React,{useState,useEffect}from'react';import{TextField,Button,Typography,Paper}from'@material-ui/core';import{useDispatch,useSelector}from'react-redux';import FileBase from'react-file-base64';import useStyles from'./styles';import{createPost,updatePost}from'../../actions/posts';const Form=_ref=>{let{currentId,setCurrentId}=_ref;const[postData,setPostData]=useState({creator:'',title:'',message:'',tags:'',selectedFile:''});const post=useSelector(state=>currentId?state.posts.find(message=>message._id===currentId):null);const dispatch=useDispatch();const classes=useStyles();useEffect(()=>{if(post)setPostData(post);},[post]);const clear=()=>{setCurrentId(0);setPostData({creator:'',title:'',message:'',tags:'',selectedFile:''});};const handleSubmit=async e=>{e.preventDefault();if(currentId===0){dispatch(createPost(postData));clear();}else{dispatch(updatePost(currentId,postData));clear();}};return/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",noValidate:true,className:\"\".concat(classes.root,\" \").concat(classes.form),onSubmit:handleSubmit},/*#__PURE__*/React.createElement(Typography,{variant:\"h6\"},currentId?\"Editing \\\"\".concat(post.title,\"\\\"\"):'Creating a Memory'),/*#__PURE__*/React.createElement(TextField,{name:\"creator\",variant:\"outlined\",label:\"Creator\",fullWidth:true,value:postData.creator,onChange:e=>setPostData({...postData,creator:e.target.value})}),/*#__PURE__*/React.createElement(TextField,{name:\"title\",variant:\"outlined\",label:\"Title\",fullWidth:true,value:postData.title,onChange:e=>setPostData({...postData,title:e.target.value})}),/*#__PURE__*/React.createElement(TextField,{name:\"message\",variant:\"outlined\",label:\"Message\",fullWidth:true,multiline:true,rows:4,value:postData.message,onChange:e=>setPostData({...postData,message:e.target.value})}),/*#__PURE__*/React.createElement(TextField,{name:\"tags\",variant:\"outlined\",label:\"Tags (coma separated)\",fullWidth:true,value:postData.tags,onChange:e=>setPostData({...postData,tags:e.target.value.split(',')})}),/*#__PURE__*/React.createElement(\"div\",{className:classes.fileInput},/*#__PURE__*/React.createElement(FileBase,{type:\"file\",multiple:false,onDone:_ref2=>{let{base64}=_ref2;return setPostData({...postData,selectedFile:base64});}})),/*#__PURE__*/React.createElement(Button,{className:classes.buttonSubmit,variant:\"contained\",color:\"primary\",size:\"large\",type:\"submit\",fullWidth:true},\"Submit\"),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",onClick:clear,fullWidth:true},\"Clear\")));};export default Form;","map":{"version":3,"names":["React","useState","useEffect","TextField","Button","Typography","Paper","useDispatch","useSelector","FileBase","useStyles","createPost","updatePost","Form","_ref","currentId","setCurrentId","postData","setPostData","creator","title","message","tags","selectedFile","post","state","posts","find","_id","dispatch","classes","clear","handleSubmit","e","preventDefault","createElement","className","paper","autoComplete","noValidate","concat","root","form","onSubmit","variant","name","label","fullWidth","value","onChange","target","multiline","rows","split","fileInput","type","multiple","onDone","_ref2","base64","buttonSubmit","color","size","onClick"],"sources":["D:/Memo-P/client/src/components/Form/Form.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { TextField, Button, Typography, Paper } from '@material-ui/core';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport FileBase from 'react-file-base64';\r\n\r\nimport useStyles from './styles';\r\nimport { createPost, updatePost } from '../../actions/posts';\r\n\r\nconst Form = ({ currentId, setCurrentId }) => {\r\n  const [postData, setPostData] = useState({ creator: '', title: '', message: '', tags: '', selectedFile: '' });\r\n  const post = useSelector((state) => (currentId ? state.posts.find((message) => message._id === currentId) : null));\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (post) setPostData(post);\r\n  }, [post]);\r\n\r\n  const clear = () => {\r\n    setCurrentId(0);\r\n    setPostData({ creator: '', title: '', message: '', tags: '', selectedFile: '' });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (currentId === 0) {\r\n      dispatch(createPost(postData));\r\n      clear();\r\n    } else {\r\n      dispatch(updatePost(currentId, postData));\r\n      clear();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.paper}>\r\n      <form autoComplete=\"off\" noValidate className={`${classes.root} ${classes.form}`} onSubmit={handleSubmit}>\r\n        <Typography variant=\"h6\">{currentId ? `Editing \"${post.title}\"` : 'Creating a Memory'}</Typography>\r\n        <TextField name=\"creator\" variant=\"outlined\" label=\"Creator\" fullWidth value={postData.creator} onChange={(e) => setPostData({ ...postData, creator: e.target.value })} />\r\n        <TextField name=\"title\" variant=\"outlined\" label=\"Title\" fullWidth value={postData.title} onChange={(e) => setPostData({ ...postData, title: e.target.value })} />\r\n        <TextField name=\"message\" variant=\"outlined\" label=\"Message\" fullWidth multiline rows={4} value={postData.message} onChange={(e) => setPostData({ ...postData, message: e.target.value })} />\r\n        <TextField name=\"tags\" variant=\"outlined\" label=\"Tags (coma separated)\" fullWidth value={postData.tags} onChange={(e) => setPostData({ ...postData, tags: e.target.value.split(',') })} />\r\n        <div className={classes.fileInput}><FileBase type=\"file\" multiple={false} onDone={({ base64 }) => setPostData({ ...postData, selectedFile: base64 })} /></div>\r\n        <Button className={classes.buttonSubmit} variant=\"contained\" color=\"primary\" size=\"large\" type=\"submit\" fullWidth>Submit</Button>\r\n        <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={clear} fullWidth>Clear</Button>\r\n      </form>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}