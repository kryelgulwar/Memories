(this["webpackJsonpmern-stack-client"]=this["webpackJsonpmern-stack-client"]||[]).push([[0],{106:function(e,a,t){},107:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(8),c=t.n(r),i=t(17),o=t(31),s=t(72);const m=Object(o.b)({posts:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_ALL":return a.payload;case"LIKE":return e.map(e=>e._id===a.payload._id?a.payload:e);case"CREATE":return[...e,a.payload];case"UPDATE":return e.map(e=>e._id===a.payload._id?a.payload:e);case"DELETE":return e.filter(e=>e._id!==a.payload);default:return e}}});var d=t(147),p=t(148),u=t(142),g=t(151),E=t(146),y=t(145),b=t(139),f=t(141),h=t(150),v=t(143),x=t(144),C=t(68),j=t.n(C),w=t(69),I=t.n(w),O=t(67),k=t.n(O),N=t(62),T=t.n(N),_=t(32),S=t.n(_);const A="https://memories-8kpa.vercel.app",D=()=>async e=>{try{const{data:a}=await S.a.get(A);e({type:"FETCH_ALL",payload:a})}catch(a){console.log(a.message)}},L=e=>async a=>{try{const{data:n}=await(t=e,S.a.post(A,t));a({type:"CREATE",payload:n})}catch(n){console.log(n.message)}var t},z=(e,a)=>async t=>{try{const{data:n}=await((e,a)=>S.a.patch("".concat(A,"/").concat(e),a))(e,a);t({type:"UPDATE",payload:n})}catch(n){console.log(n.message)}},W=e=>async a=>{try{const{data:t}=await(e=>S.a.patch("".concat(A,"/").concat(e,"/likePost")))(e);a({type:"LIKE",payload:t})}catch(t){console.log(t.message)}},F=e=>async a=>{try{await(e=>S.a.delete("".concat(A,"/").concat(e)))(e),a({type:"DELETE",payload:e})}catch(t){console.log(t.message)}};var B=t(136),M=Object(B.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"}});var R=e=>{let{post:a,setCurrentId:t}=e;const n=Object(i.b)(),r=M();return l.a.createElement(b.a,{className:r.card},l.a.createElement(f.a,{className:r.media,image:a.selectedFile||"https://user-images.githubusercontent.com/194400/49531010-48dad180-f8b1-11e8-8d89-1e61320e1d82.png",title:a.title}),l.a.createElement("div",{className:r.overlay},l.a.createElement(u.a,{variant:"h6"},a.creator),l.a.createElement(u.a,{variant:"body2"},T()(a.createdAt).fromNow())),l.a.createElement("div",{className:r.overlay2},l.a.createElement(h.a,{style:{color:"white"},size:"small",onClick:()=>t(a._id)},l.a.createElement(k.a,{fontSize:"default"}))),l.a.createElement("div",{className:r.details},l.a.createElement(u.a,{variant:"body2",color:"textSecondary",component:"h2"},a.tags.map(e=>"#".concat(e," ")))),l.a.createElement(u.a,{className:r.title,gutterBottom:!0,variant:"h5",component:"h2"},a.title),l.a.createElement(v.a,null,l.a.createElement(u.a,{variant:"body2",color:"textSecondary",component:"p"},a.message)),l.a.createElement(x.a,{className:r.cardActions},l.a.createElement(h.a,{size:"small",color:"primary",onClick:()=>n(W(a._id))},l.a.createElement(j.a,{fontSize:"small"})," Like ",a.likeCount," "),l.a.createElement(h.a,{size:"small",color:"primary",onClick:()=>n(F(a._id))},l.a.createElement(I.a,{fontSize:"small"})," Delete")))},H=Object(B.a)(e=>({mainContainer:{display:"flex",alignItems:"center"},smMargin:{margin:e.spacing(1)},actionDiv:{textAlign:"center"}}));var P=e=>{let{setCurrentId:a}=e;const t=Object(i.c)(e=>e.posts),n=H();return t.length?l.a.createElement(E.a,{className:n.container,container:!0,alignItems:"stretch",spacing:3},t.map(e=>l.a.createElement(E.a,{key:e._id,item:!0,xs:12,sm:6,md:6},l.a.createElement(R,{post:e,setCurrentId:a})))):l.a.createElement(y.a,null)},J=t(74),K=t(149),U=t(70),V=t.n(U),q=Object(B.a)(e=>({root:{"& .MuiTextField-root":{margin:e.spacing(1)}},paper:{padding:e.spacing(2)},form:{display:"flex",flexWrap:"wrap",justifyContent:"center"},fileInput:{width:"97%",margin:"10px 0"},buttonSubmit:{marginBottom:10}}));var G=e=>{let{currentId:a,setCurrentId:t}=e;const[r,c]=Object(n.useState)({creator:"",title:"",message:"",tags:"",selectedFile:""}),o=Object(i.c)(e=>a?e.posts.find(e=>e._id===a):null),s=Object(i.b)(),m=q();Object(n.useEffect)(()=>{o&&c(o)},[o]);const d=()=>{t(0),c({creator:"",title:"",message:"",tags:"",selectedFile:""})};return l.a.createElement(J.a,{className:m.paper},l.a.createElement("form",{autoComplete:"off",noValidate:!0,className:"".concat(m.root," ").concat(m.form),onSubmit:async e=>{e.preventDefault(),0===a?(s(L(r)),d()):(s(z(a,r)),d())}},l.a.createElement(u.a,{variant:"h6"},a?'Editing "'.concat(o.title,'"'):"Creating a Memory"),l.a.createElement(K.a,{name:"creator",variant:"outlined",label:"Creator",fullWidth:!0,value:r.creator,onChange:e=>c({...r,creator:e.target.value})}),l.a.createElement(K.a,{name:"title",variant:"outlined",label:"Title",fullWidth:!0,value:r.title,onChange:e=>c({...r,title:e.target.value})}),l.a.createElement(K.a,{name:"message",variant:"outlined",label:"Message",fullWidth:!0,multiline:!0,rows:4,value:r.message,onChange:e=>c({...r,message:e.target.value})}),l.a.createElement(K.a,{name:"tags",variant:"outlined",label:"Tags (coma separated)",fullWidth:!0,value:r.tags,onChange:e=>c({...r,tags:e.target.value.split(",")})}),l.a.createElement("div",{className:m.fileInput},l.a.createElement(V.a,{type:"file",multiple:!1,onDone:e=>{let{base64:a}=e;return c({...r,selectedFile:a})}})),l.a.createElement(h.a,{className:m.buttonSubmit,variant:"contained",color:"primary",size:"large",type:"submit",fullWidth:!0},"Submit"),l.a.createElement(h.a,{variant:"contained",color:"secondary",size:"small",onClick:d,fullWidth:!0},"Clear")))},Q=Object(B.a)(()=>({appBar:{borderRadius:15,margin:"30px 0",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},heading:{color:"rgba(0,183,255, 1)"},image:{marginLeft:"15px"}})),X=t(71),Y=t.n(X);var Z=()=>{const[e,a]=Object(n.useState)(0),t=Object(i.b)(),r=Q();return Object(n.useEffect)(()=>{t(D())},[e,t]),l.a.createElement(d.a,{maxWidth:"lg"},l.a.createElement(p.a,{className:r.appBar,position:"static",color:"inherit"},l.a.createElement(u.a,{className:r.heading,variant:"h2",align:"center"},"Memories"),l.a.createElement("img",{className:r.image,src:Y.a,alt:"icon",height:"60"})),l.a.createElement(g.a,{in:!0},l.a.createElement(d.a,null,l.a.createElement(E.a,{container:!0,justify:"space-between",alignItems:"stretch",spacing:3},l.a.createElement(E.a,{item:!0,xs:12,sm:7},l.a.createElement(P,{setCurrentId:a})),l.a.createElement(E.a,{item:!0,xs:12,sm:4},l.a.createElement(G,{currentId:e,setCurrentId:a}))))))};t(106);const $=Object(o.d)(m,Object(o.c)(Object(o.a)(s.a)));c.a.render(l.a.createElement(i.a,{store:$},l.a.createElement(Z,null)),document.getElementById("root"))},71:function(e,a,t){e.exports=t.p+"static/media/memories.5c0c63fb.png"},79:function(e,a,t){e.exports=t(107)}},[[79,1,2]]]);
//# sourceMappingURL=main.b5e2234f.chunk.js.map